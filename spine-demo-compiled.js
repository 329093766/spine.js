var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!1;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};
goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(!COMPILED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,j=0;d=b[j];j++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=
-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var l in d.requires[e])if(!goog.isProvided_(l))if(l in d.nameToPath)a(d.nameToPath[l]);else throw Error("Undefined nameToPath for "+l);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),j=!1,l=a.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[b]===d)j=!0;else if(j)return l.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var spine={toBool:function(a,b){return void 0!==a?"true"===a?!0:!1:b||!1},toInt:function(a,b){return void 0!==a?parseInt(a,10):b||0},toFloat:function(a,b){return void 0!==a?parseFloat(a):b||0},toString:function(a,b){return void 0!==a?a:b||""},toArray:function(a,b){return a?a.length?a:[a]:b||[]},bezier_curve:function(a,b,c,d,e){e=e||1E-6;var j=function(b){var d=b*b,e=1-b;return 3*a*(e*e)*b+3*c*e*d+d*b},l=function(a){var c=a*a,e=1-a;return 3*b*(e*e)*a+3*d*e*c+c*a};return function(b){var d,g,k,m;k=b;
for(d=0;8>d;d++){m=j(k)-b;if(Math.abs(m)<e)return l(k);g=k*k;g=3*a*k-3*(2*a-c)*g+(3*a-3*c+1)*g*k;if(1E-6>Math.abs(g))break;k-=m/g}d=0;g=1;k=b;if(k<d)return l(d);if(k>g)return l(g);for(;d<g;){m=j(k);if(Math.abs(m-b)<e)break;b>m?d=k:g=k;k=0.5*(g-d)+d}return l(k)}},step_bezier_curve:function(a,b,c,d){var e=0.1*0.1,j=0.1*e,l=3*0.1,h=3*e,e=6*e,f=6*j,g=2*-a+c,k=2*-b+d;c=3*(a-c)+1;d=3*(b-d)+1;var m=a*l+g*h+c*j,s=b*l+k*h+d*j,r=g*e+c*f,t=k*e+d*f,p=c*f,q=d*f;return function(a){for(var b=m,c=s,d=r,e=t,f=b,g=
c,h=8;;){if(f>=a)return b=f-b,c=g-c,c+(g-c)*(a-b)/(f-b);if(0==h)break;h--;b+=d;c+=e;d+=p;e+=q;f+=b;g+=c}return g+(1-g)*(a-f)/(1-f)}},toCurve:function(a,b){if(void 0!==a){if("stepped"==a)return function(){return 0};if(4==a.length){var c=parseFloat(a[0]),d=parseFloat(a[1]),e=parseFloat(a[2]),j=parseFloat(a[3]);return spine.step_bezier_curve(c,d,e,j)}}return b||function(a){return a}},tween:function(a,b,c){return a+(b-a)*c},wrapAngle:function(a){for(;180<=a;)a-=360;for(;-180>a;)a+=360;return a},tweenAngle:function(a,
b,c){return spine.wrapAngle(a+spine.wrapAngle(b-a)*c)},skel_bone:function(){this.parent=null;this.rotation=this.y=this.x=this.length=0;this.scaleY=this.scaleX=1}};spine.skel_bone.prototype.copy=function(a){this.parent=a.parent;this.length=a.length;this.x=a.x;this.y=a.y;this.rotation=a.rotation;this.scaleX=a.scaleX;this.scaleY=a.scaleY;return this};
spine.skel_bone.prototype.load=function(a){this.parent=spine.toString(a.parent,null);this.length=spine.toFloat(a.length,0);this.x=spine.toFloat(a.x,0);this.y=spine.toFloat(a.y,0);this.rotation=spine.toFloat(a.rotation,0);this.scaleX=spine.toFloat(a.scaleX,1);this.scaleY=spine.toFloat(a.scaleY,1);return this};spine.skel_slot=function(){this.bone="";this.rgba=4294967295;this.a=this.b=this.g=this.r=1;this.attachment=null};
spine.skel_slot.prototype.copy=function(a){this.bone=a.bone;this.rgba=a.rgba;this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a;this.attachment=a.attachment;return this};spine.skel_slot.prototype.load=function(a){this.bone=spine.toString(a.bone,null)||"";this.rgba=void 0!==a.color?parseInt(a.color,16):4294967295;this.r=(this.rgba>>24&255)/255;this.g=(this.rgba>>16&255)/255;this.b=(this.rgba>>8&255)/255;this.a=(this.rgba&255)/255;this.attachment=spine.toString(a.attachment,null);return this};
spine.skin_attachment=function(){this.name=null;this.type="region";this.rotation=this.y=this.x=0;this.scaleY=this.scaleX=1;this.height=this.width=0};
spine.skin_attachment.prototype.load=function(a){this.name=a.name||null;this.type=spine.toString(a.type,"region");switch(this.type){case "animatedRegion":var b=a.fps&&spine.toFloat(a.fps,0),c=a.playMode&&spine.toString(a.playMode,"forward");window.console.log("TODO: animatedRegion({ fps:"+b+", playMode:"+c+" })")}this.x=spine.toFloat(a.x,0);this.y=spine.toFloat(a.y,0);this.rotation=spine.toFloat(a.rotation,0);this.scaleX=spine.toFloat(a.scaleX,1);this.scaleY=spine.toFloat(a.scaleY,1);this.width=spine.toFloat(a.width,
0);this.height=spine.toFloat(a.height,0);return this};spine.skin_slot=function(){this.skin_attachments={}};spine.skin_slot.prototype.load=function(a){for(var b in a)this.skin_attachments[b]=(new spine.skin_attachment).load(a[b]);return this};spine.skin=function(){this.skin_slots={}};spine.skin.prototype.load=function(a){for(var b in a)this.skin_slots[b]=(new spine.skin_slot).load(a[b]);return this};spine.translate_key=function(a){this.time=a||0;this.y=this.x=0;this.curve=null};
spine.translate_key.prototype.load=function(a){this.x=spine.toFloat(a.x,0);this.y=spine.toFloat(a.y,0);this.curve=spine.toCurve(a.curve);return this};spine.rotate_key=function(a){this.time=a||0;this.angle=0;this.curve=null};spine.rotate_key.prototype.load=function(a){this.angle=spine.toFloat(a.angle,0);this.curve=spine.toCurve(a.curve);return this};spine.scale_key=function(a){this.time=a||0;this.scaleY=this.scaleX=0;this.curve=null};
spine.scale_key.prototype.load=function(a){this.scaleX=spine.toFloat(a.x,1);this.scaleY=spine.toFloat(a.y,1);this.curve=spine.toCurve(a.curve);return this};spine.anim_bone=function(){this.max_time=this.min_time=0;this.translate_keys=[];this.rotate_keys=[];this.scale_keys=[]};
spine.anim_bone.prototype.load=function(a){this.max_time=this.min_time=0;this.translate_keys=[];this.rotate_keys=[];this.scale_keys=[];if(a.translate){if(a.translate instanceof Array)for(var b=0;b<a.translate.length;++b){var c=a.translate[b],d=1E3*spine.toFloat(c.time,0);this.min_time=Math.min(this.min_time,d);this.max_time=Math.max(this.max_time,d);this.translate_keys.push((new spine.translate_key(d)).load(c))}else for(b in a.translate)c=a.translate[b],d=1E3*parseFloat(b),this.min_time=Math.min(this.min_time,
d),this.max_time=Math.max(this.max_time,d),this.translate_keys.push((new spine.translate_key(d)).load(c));this.translate_keys.sort(function(a,b){return a.time-b.time})}if(a.rotate){if(a.rotate instanceof Array)for(var e=0;e<a.rotate.length;++e)b=a.rotate[e],d=1E3*spine.toFloat(b.time,0),this.min_time=Math.min(this.min_time,d),this.max_time=Math.max(this.max_time,d),this.rotate_keys.push((new spine.rotate_key(d)).load(b));else for(e in a.rotate)b=a.rotate[e],d=1E3*parseFloat(e),this.min_time=Math.min(this.min_time,
d),this.max_time=Math.max(this.max_time,d),this.rotate_keys.push((new spine.rotate_key(d)).load(b));this.rotate_keys.sort(function(a,b){return a.time-b.time})}if(a.scale){if(a.scale instanceof Array)for(var j=0;j<a.scale.length;++j)e=a.scale[j],d=1E3*spine.toFloat(e.time,0),this.min_time=Math.min(this.min_time,d),this.max_time=Math.max(this.max_time,d),this.scale_keys.push((new spine.scale_key(d)).load(e));else for(j in a.scale)e=a.scale[j],d=1E3*parseFloat(j),this.min_time=Math.min(this.min_time,
d),this.max_time=Math.max(this.max_time,d),this.scale_keys.push((new spine.scale_key(d)).load(e));this.scale_keys.sort(function(a,b){return a.time-b.time})}return this};spine.anim_slot=function(){this.max_time=this.min_time=0;this.color_keys=[];this.attachment_keys=[]};
spine.anim_slot.prototype.load=function(a){this.max_time=this.min_time=0;this.color_keys=[];this.attachment_keys=[];if(a.color){if(a.color instanceof Array)for(var b=0;b<a.color.length;++b){var c=a.color[b],d=1E3*spine.toFloat(c.time,0);this.min_time=Math.min(this.min_time,d);this.max_time=Math.max(this.max_time,d);var e=parseInt(c.color,16),j=(e>>24&255)/255,l=(e>>16&255)/255,h=(e>>8&255)/255,f=(e&255)/255,c=spine.toCurve(c.curve);this.color_keys.push({time:d,rgba:e,r:j,g:l,b:h,a:f,curve:c})}else for(b in a.color)c=
a.color[b],d=1E3*parseFloat(b),this.min_time=Math.min(this.min_time,d),this.max_time=Math.max(this.max_time,d),e=parseInt(c.color,16),j=(e>>24&255)/255,l=(e>>16&255)/255,h=(e>>8&255)/255,f=(e&255)/255,c=spine.toCurve(c.curve),this.color_keys.push({time:d,rgba:e,r:j,g:l,b:h,a:f,curve:c});this.color_keys.sort(function(a,b){return a.time-b.time})}if(a.attachment){if(a.attachment instanceof Array)for(var g=0;g<a.attachment.length;++g)b=a.attachment[g],d=1E3*spine.toFloat(b.time,0),this.min_time=Math.min(this.min_time,
d),this.max_time=Math.max(this.max_time,d),b=b.name,this.attachment_keys.push({time:d,attachment:b});else for(g in a.attachment)b=a.attachment[g],d=1E3*parseFloat(g),this.min_time=Math.min(this.min_time,d),this.max_time=Math.max(this.max_time,d),this.attachment_keys.push({time:d,attachment:b});this.attachment_keys.sort(function(a,b){return a.time-b.time})}return this};spine.animation=function(){this.name=null;this.anim_bones={};this.anim_slots={};this.length=this.max_time=this.min_time=0};
spine.animation.prototype.load=function(a){this.anim_bones={};this.anim_slots={};this.max_time=this.min_time=0;if(a.bones)for(var b in a.bones){var c=(new spine.anim_bone).load(a.bones[b]);this.min_time=Math.min(this.min_time,c.min_time);this.max_time=Math.max(this.max_time,c.max_time);this.anim_bones[b]=c}if(a.slots)for(var d in a.slots)b=(new spine.anim_slot).load(a.slots[d]),this.min_time=Math.min(this.min_time,b.min_time),this.max_time=Math.max(this.max_time,b.max_time),this.anim_slots[d]=b;this.length=
this.max_time-this.min_time;return this};spine.animation.find_key=function(a,b){if(0>=a.length||b<a[0].time)return-1;var c=a.length-1;if(b>=a[c].time)return c;var d=0;if(0==c)return 0;for(var e=c>>1;;){a[e+1].time<=b?d=e+1:c=e;if(d==c)return d;e=d+c>>1}};spine.skeleton=function(){this.current_skin_i=this.name=null;this.skel_bones={};this.skel_slots={};this.skins={};this.m_animations=[]};
spine.skeleton.prototype.load=function(a){this.current_skin_i=null;if(a.skins)for(var b in a.skins){this.current_skin_i=b;break}this.skel_bones={};this.skel_slots={};this.skins={};if(a.bones)if(a.bones instanceof Array)for(var c=0;c<a.bones.length;++c)this.skel_bones[a.bones[c].name]=(new spine.skel_bone).load(a.bones[c]);else for(c in a.bones)this.skel_bones[c]=(new spine.skel_bone).load(a.bones[c]);if(a.slots)if(a.slots instanceof Array)for(c=0;c<a.slots.length;++c)this.skel_slots[a.slots[c].name]=
(new spine.skel_slot).load(a.slots[c]);else for(var d in a.slots)this.skel_slots[d]=(new spine.skel_slot).load(a.slots[d]);if(a.skins)for(b in a.skins)this.skins[b]=(new spine.skin).load(a.skins[b]);return this};spine.skeleton.prototype.getNumAnims=function(){return this.m_animations.length};spine.skeleton.prototype.getAnimName=function(a){return 0<=a&&a<this.getNumAnims()?this.m_animations[a].name:null};
spine.skeleton.prototype.getAnimLength=function(a){return 0<=a&&a<this.getNumAnims()?this.m_animations[a].length:-1};spine.pose=function(a){this.m_skeleton=a||null;this.m_anim_index=-1;this.m_time=0;this.m_dirty=!0;this.m_tweened_skel_bones={};this.m_tweened_skel_slots={}};spine.pose.prototype.getNumAnims=function(){return this.m_skeleton?this.m_skeleton.getNumAnims():0};spine.pose.prototype.getAnim=function(){return this.m_anim_index};
spine.pose.prototype.setAnim=function(a){if(isFinite(a))this.m_anim_index=0<=a&&a<this.getNumAnims()?a:-1,this.m_time=0,this.m_dirty=!0;else for(var b=0,c=this.getNumAnims();b<c;++b)if(a==this.getAnimName(b)){this.m_anim_index=b;this.m_time=0;this.m_dirty=!0;break}};spine.pose.prototype.setNextAnim=function(){var a=this.getNumAnims();1<a&&this.setAnim((this.getAnim()+1)%a)};spine.pose.prototype.setPrevAnim=function(){var a=this.getNumAnims();1<a&&this.setAnim((this.getAnim()+a-1)%a)};
spine.pose.prototype.getAnimName=function(a){a=void 0!==a?a:this.m_anim_index;return this.m_skeleton?this.m_skeleton.getAnimName(a):null};spine.pose.prototype.getAnimLength=function(a){a=void 0!==a?a:this.m_anim_index;return this.m_skeleton?this.m_skeleton.getAnimLength(a):-1};spine.pose.prototype.getTime=function(){return this.m_time};
spine.pose.prototype.setTime=function(a){if(this.m_time!=a){this.m_time=a;a=this.getAnimLength();if(0<a){for(;0>this.m_time;)this.m_time+=a;for(;this.m_time>=a;)this.m_time-=a}this.m_dirty=!0}};spine.pose.prototype.update=function(a){var b=this.getAnimLength();if(0<b){for(this.m_time+=a;0>this.m_time;)this.m_time+=b;for(;this.m_time>=b;)this.m_time-=b;this.m_dirty=!0}};
spine.pose.prototype.strike=function(){var a=this.m_skeleton;if(a){var b=null;0<=this.m_anim_index&&this.m_anim_index<a.m_animations.length&&(b=a.m_animations[this.m_anim_index]);var c=this.getTime();if(this.m_dirty){this.m_dirty=!1;for(var d in a.skel_bones){var e=a.skel_bones[d],j=this.m_tweened_skel_bones[d]||(this.m_tweened_skel_bones[d]=new spine.skel_bone);j.copy(e);var l=b&&b.anim_bones&&b.anim_bones[d];if(l){var h=l.translate_keys;if(h){var f=spine.animation.find_key(h,c);-1!=f&&(e=h[f],f+=
1,f<h.length?(h=h[f],f=(c-e.time)/(h.time-e.time),f=e.curve(f),j.x+=spine.tween(e.x,h.x,f),j.y+=spine.tween(e.y,h.y,f)):(j.x+=e.x,j.y+=e.y))}if(h=l.rotate_keys)f=spine.animation.find_key(h,c),-1!=f&&(e=h[f],f+=1,f<h.length?(h=h[f],f=(c-e.time)/(h.time-e.time),f=e.curve(f),j.rotation+=spine.tweenAngle(e.angle,h.angle,f)):j.rotation+=e.angle);if(h=l.scale_keys)f=spine.animation.find_key(h,c),-1!=f&&(e=h[f],f+=1,f<h.length?(h=h[f],f=(c-e.time)/(h.time-e.time),f=e.curve(f),j.scaleX+=spine.tween(e.scaleX,
h.scaleX,f)-1,j.scaleY+=spine.tween(e.scaleY,h.scaleY,f)-1):(j.scaleX+=e.scaleX-1,j.scaleY+=e.scaleY-1))}}for(var g in a.skel_slots)if(e=a.skel_slots[g],d=this.m_tweened_skel_slots[g]||(this.m_tweened_skel_slots[g]=new spine.skel_slot),d.copy(e),j=b&&b.anim_slots&&b.anim_slots[g]){if(h=j.color_keys)f=spine.animation.find_key(h,c),-1!=f&&(e=h[f],f+=1,f<h.length?(h=h[f],f=(c-e.time)/(h.time-e.time),f=e.curve(f),d.r=spine.tween(e.r,h.r,f),d.g=spine.tween(e.g,h.g,f),d.b=spine.tween(e.b,h.b,f),d.a=spine.tween(e.a,
h.a,f)):(d.r=e.r,d.g=e.g,d.b=e.b,d.a=e.a));if(h=j.attachment_keys)f=spine.animation.find_key(h,c),-1!=f&&(e=h[f],e.attachment&&(d.attachment=e.attachment))}}}};var fo={v2:function(a,b){this.x=a||0;this.y=b||0}};fo.v2.ZERO=new fo.v2;fo.v2.prototype.makeZero=function(){this.y=this.x=0;return this};fo.v2.prototype.selfTranslate=function(a,b){this.x+=a;this.y+=b;return this};fo.v2.prototype.selfRotate=function(a,b){var c=this.x,d=this.y;this.x=c*a-d*b;this.y=c*b+d*a;return this};fo.v2.prototype.selfRotateRadians=function(a){return this.selfRotate(Math.cos(a),Math.sin(a))};
fo.v2.prototype.selfRotateDegrees=function(a){return this.selfRotateRadians(a*Math.PI/180)};fo.v2.prototype.selfScale=function(a,b){this.x*=a;this.y*=b;return this};fo.m3x2=function(){this.a_x=1;this.a_y=this.c_x=this.b_x=0;this.b_y=1;this.c_y=0};fo.m3x2.IDENTITY=new fo.m3x2;fo.m3x2.prototype.makeIdentity=function(){this.a_x=1;this.a_y=this.c_x=this.b_x=0;this.b_y=1;this.c_y=0;return this};
fo.m3x2.prototype.selfTranslate=function(a,b){this.c_x+=this.a_x*a+this.b_x*b;this.c_y+=this.a_y*a+this.b_y*b;return this};fo.m3x2.prototype.selfRotate=function(a,b){var c=this.a_x,d=this.a_y,e=this.b_x,j=this.b_y,l=-b;this.a_x=c*a+e*b;this.a_y=d*a+j*b;this.b_x=c*l+e*a;this.b_y=d*l+j*a;return this};fo.m3x2.prototype.selfRotateRadians=function(a){return this.selfRotate(Math.cos(a),Math.sin(a))};fo.m3x2.prototype.selfRotateDegrees=function(a){return this.selfRotateRadians(a*Math.PI/180)};
fo.m3x2.prototype.selfScale=function(a,b){this.a_x*=a;this.a_y*=a;this.b_x*=b;this.b_y*=b;return this};fo.m3x2.prototype.applyVector=function(a,b){var c=a.x,d=a.y;b.x=this.a_x*c+this.b_x*d+this.c_x;b.y=this.a_y*c+this.b_y*d+this.c_y;return b};var main={start:function(){document.body.appendChild(document.createElement("div"));var a=document.body.appendChild(document.createElement("div")),b=document.body.appendChild(document.createElement("div")),c=document.body.appendChild(document.createElement("div")),d=document.body.appendChild(document.createElement("div")),e=document.body.appendChild(document.createElement("div"));b.style.display="inline-block";var j=0,l=0,h=1,f=function(a){for(var b=main.get_pose_extent(a),c=0,d=a.getNumAnims();c<
d;++c){a.setAnim(c);for(var e=0,f=a.getAnimLength();e<f;e+=100)a.setTime(e),b=main.get_pose_extent(a,b)}a.setAnim(0);j=(b.max.x+b.min.x)/2;l=(b.max.y+b.min.y)/2;h=1/Math.min(640/(b.max.x-b.min.x),480/(b.max.y-b.min.y));h*=1.1},g=["data/examples/dragon/dragon-flying.json"],k=new spine.pose,m=new spine.skeleton;c.innerHTML="Loading...";main.load_skeleton_from_url(m,"data/examples/dragon/dragon-skeleton.json",function(a){return function(){c.innerHTML="Skeleton Name: data/examples/dragon/dragon-skeleton.json";
k=new spine.pose(a);f(k);for(var b=0;b<g.length;++b){var e=g[b],h=new spine.animation;h.name=e;d.innerHTML="Loading...";main.load_animation_from_url(h,e,function(b){return function(){d.innerHTML="Animation Name: "+e;a.m_animations.push(b);f(k)}}(h))}}}(m));m=a.appendChild(document.createElement("input"));m.type="file";m.multiple="multiple";m.directory=m.webkitdirectory=m.mozdirectory="directory";a.appendChild(document.createElement("span")).innerHTML="Drag the parent directory of a Spine skeleton JSON file to the file input.";
m.addEventListener("change",function(a){for(var b=a.target.files,e=0,g=b.length;e<g;++e)a=b[e],a.webkitRelativePath=a.webkitRelativePath||null,a.mozRelativePath=a.mozRelativePath||null,a.relativePath=a.relativePath||a.webkitRelativePath||a.mozRelativePath||a.name;for(var h=[],e=0,g=b.length;e<g;++e)a=b[e],a.name.toLowerCase().match("^.*-skeleton.json$")&&h.push(a);if(0<h.length){for(var j=h[0],h=(a=j.name.match(/^(\w*)-skeleton.json$/i))&&a[1],l=[],e=0,g=b.length;e<g;++e)a=b[e],a!=j&&a.name.toLowerCase().match("^"+
h+"-.*.json$")&&l.push(a);a=new spine.skeleton;c.innerHTML="Loading...";main.load_skeleton_from_input_file(a,j,b,function(a){return function(){c.innerHTML="Skeleton Name: "+j.relativePath;k=new spine.pose(a);f(k);for(var e=0,g=l.length;e<g;++e){var h=l[e],m=new spine.animation;m.name=h.relativePath;d.innerHTML="Loading...";main.load_animation_from_input_file(m,h,b,function(b){return function(){d.innerHTML="Animation Name: "+h.relativePath;a.m_animations.push(b);f(k)}}(m))}}}(a))}},!1);var s=0,r=0,
t=!1,p=0,q=0;b.addEventListener("mousedown",function(a){t=!0;p=a.clientX;q=a.clientY},!1);b.addEventListener("mouseup",function(){t=!1},!1);b.addEventListener("mousemove",function(a){s=a.clientX;r=a.clientY;if(t){var b=s-p,c=r-q,b=b*h,c=-c*h,d=0*Math.PI/180;a=Math.cos(d);d=Math.sin(d);j-=b*a-c*d;l-=b*d+c*a;p=s;q=r}},!1);b.addEventListener("mousewheel",function(a){0>a.wheelDelta?(h*=1.1,h=Math.min(h,100)):0<a.wheelDelta&&(h*=0.9,h=Math.max(h,0.01))},!1);m=b.appendChild(document.createElement("div"));
m.style.display="inline-block";a=m.appendChild(document.createElement("div"));a.innerHTML="2D Canvas";a=m.appendChild(document.createElement("canvas"));a.style.display="inline-block";a.style.border="1px solid black";a.width=640;a.height=480;var n=new main.view_2d(a),b=b.appendChild(document.createElement("div"));b.style.display="inline-block";a=b.appendChild(document.createElement("div"));a.innerHTML="WebGL Canvas";b=b.appendChild(document.createElement("canvas"));b.style.display="inline-block";b.style.border=
"1px solid black";b.width=640;b.height=480;var v=new main.view_gl(b),u=1,b=e.appendChild(document.createElement("span")),a=e.appendChild(document.createElement("input")),y=e.appendChild(document.createElement("span"));b.innerHTML="Time Scale: ";a.type="range";a.min=-2;a.max=2;a.step=0.01;a.value=u;y.innerHTML=u;a.addEventListener("change",function(a){u=parseFloat(a.target.value);y.innerHTML=u.toFixed(2)},!1);var w=!1,b=e.appendChild(document.createElement("input")),e=e.appendChild(document.createElement("span"));
b.type="checkbox";b.checked=w;e.innerHTML="Debug Draw";b.addEventListener("change",function(a){w=a.target.checked},!1);var C=0,z=0,x=0,A=0,B=function(a){window.requestAnimationFrame(B,null);++C;z=a;A=Math.min(z-x,50);var b=A*u;1<k.getNumAnims()&&(0>k.getTime()+b&&(k.setPrevAnim(),d.innerHTML="Animation Name: "+k.getAnimName()),k.getTime()+b>=k.getAnimLength()&&(k.setNextAnim(),d.innerHTML="Animation Name: "+k.getAnimName()));k.update(b);x=a;if(a=n.ctx_2d)a.clearRect(0,0,a.canvas.width,a.canvas.height),
a.save(),a.translate(a.canvas.width/2,a.canvas.height/2),a.scale(1,-1),a.scale(1/h,1/h),a.rotate(-0*Math.PI/180),a.translate(-j,-l),w?(n.debug_draw_skeleton_2d(k),n.debug_draw_pose_2d(k),b=main.get_pose_extent(k),a.strokeStyle="blue",a.strokeRect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)):n.draw_pose_2d(k),a.restore();if(a=v.ctx_gl)a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),b=new fo.m3x2,b.selfScale(1/h,1/h),b.selfRotateDegrees(-0),b.selfTranslate(-j,-l),v.load_camera_mtx(b),v.draw_pose_gl(k),
a.flush()};B(x)},load_skeleton_from_url:function(a,b,c){a.files={};var d=new XMLHttpRequest;d.open("GET",b,!0);d.addEventListener("readystatechange",function(e){if(4==d.readyState&&!(200!=d.status&&304!=d.status)&&(a.load(goog.global.JSON.parse(e.target.responseText)),c(),e=null!=a.current_skin_i?a.skins[a.current_skin_i]:null))for(var j in e.skin_slots){var l=e.skin_slots[j];if(l)for(var h in l.skin_attachments){var f=l.skin_attachments[h],g=f.name||h,k=a.files&&a.files[g];if(!k){var m=b.slice(0,
b.lastIndexOf("/")),k=a.files[g]={};k.width=f.width||0;k.height=f.height||0;f=k.image=new Image;f.hidden=!0;f.addEventListener("load",function(a){return function(b){a.width=a.width||b.target.width;a.height=a.height||b.target.height;b.target.hidden=!1}}(k),!1);f.addEventListener("error",function(){},!1);f.addEventListener("abort",function(){},!1);f.src=m+"/"+g+".png"}}}},!1);d.send();return a},load_animation_from_url:function(a,b,c){var d=new XMLHttpRequest;d.open("GET",b,!0);d.addEventListener("readystatechange",
function(b){4==d.readyState&&!(200!=d.status&&304!=d.status)&&(a.load(goog.global.JSON.parse(b.target.responseText)),c())},!1);d.send();return a},load_skeleton_from_input_file:function(a,b,c,d){a.files={};var e=new FileReader;e.addEventListener("load",function(b){a.load(goog.global.JSON.parse(b.target.result));d();if(b=null!=a.current_skin_i?a.skins[a.current_skin_i]:null)for(var e in b.skin_slots){var h=b.skin_slots[e];if(h)for(var f in h.skin_attachments){var g=h.skin_attachments[f].name||f,k=a.files&&
a.files[g];if(!k){var m;a:{k=g+".png";k=k.toLowerCase()+"$";m=0;for(var s=c.length;m<s;++m){var r=c[m];if(r.relativePath.toLowerCase().match(k)){m=r;break a}}m=null}m&&(k=a.files[g]={},g=new FileReader,g.addEventListener("load",function(a){return function(b){var c=a.image=new Image;c.hidden=!0;c.addEventListener("load",function(b){a.width=a.width||b.target.width;a.height=a.height||b.target.height;b.target.hidden=!1},!1);c.addEventListener("error",function(){},!1);c.addEventListener("abort",function(){},
!1);c.src=b.target.result}}(k),!1),g.readAsDataURL(m))}}}},!1);e.readAsText(b)},load_animation_from_input_file:function(a,b,c,d){c=new FileReader;c.addEventListener("load",function(b){a.load(goog.global.JSON.parse(b.target.result));d()},!1);c.readAsText(b)},get_pose_extent:function(a,b){b=b||{min:{x:1,y:1},max:{x:-1,y:-1}};var c=a.m_skeleton;if(!c)return b;var d=function(a){b.min.x>b.max.x?(b.min.x=b.max.x=a.x,b.min.y=b.max.y=a.y):(b.min.x=Math.min(b.min.x,a.x),b.max.x=Math.max(b.max.x,a.x),b.min.y=
Math.min(b.min.y,a.y),b.max.y=Math.max(b.max.y,a.y))},e=new fo.m3x2,j=new fo.v2(-1,-1),l=new fo.v2(1,-1),h=new fo.v2(-1,1),f=new fo.v2(1,1),g=new fo.v2(0,0);a.strike();var k=a.m_tweened_skel_bones,m=a.m_tweened_skel_slots,e=new fo.m3x2,s=function(a){a.parent&&s(k[a.parent]);e.selfTranslate(a.x,a.y);e.selfRotateDegrees(a.rotation);e.selfScale(a.scaleY,a.scaleY)},r=null!=c.current_skin_i?c.skins[c.current_skin_i]:null;if(r)for(var t in m){var p=m[t],q=p.attachment;if(q){var n=r.skin_slots[t];n&&(p=
k[p.bone],n=n.skin_attachments[q],e.makeIdentity(),s(p),e.selfTranslate(n.x,n.y),e.selfRotateDegrees(n.rotation),e.selfScale(n.scaleX,n.scaleY),q=n.name||q,(p=c.files&&c.files[q])&&p.image&&!p.image.hidden?(q=p.width,n=p.height):(q=n.width,n=n.height),e.selfScale(q/2,n/2),d(e.applyVector(h,g)),d(e.applyVector(f,g)),d(e.applyVector(l,g)),d(e.applyVector(j,g)))}}return b},view_2d:function(a){this.ctx_2d=a.getContext("2d")}};
main.view_2d.prototype.debug_draw_skeleton_2d=function(a){this.draw_skeleton_2d(a);if(a=a.m_skeleton){var b=this.ctx_2d,c=a.skel_bones,d=function(a){a.parent&&d(c[a.parent]);b.translate(a.x,a.y);b.rotate(a.rotation*Math.PI/180);b.scale(a.scaleX,a.scaleY)},e;for(e in c){a=c[e];var j=a.length||0;b.save();d(a);b.beginPath();b.arc(0,0,2,0,2*Math.PI,!1);0<j?(b.moveTo(0,-2),b.lineTo(j,0),b.lineTo(0,2)):(b.moveTo(-2,0),b.lineTo(-4,0),b.moveTo(2,0),b.lineTo(4,0),b.moveTo(0,-2),b.lineTo(0,-4),b.moveTo(0,2),
b.lineTo(0,4));b.strokeStyle="rgba(200,200,200,0.75)";b.stroke();b.scale(0.5,-0.5);b.fillText(e,0,0);b.restore()}}};
main.view_2d.prototype.draw_skeleton_2d=function(a){if(a=a.m_skeleton){var b=this.ctx_2d,c=a.skel_bones,d=a.skel_slots,e=function(a){a.parent&&e(c[a.parent]);b.translate(a.x,a.y);b.rotate(a.rotation*Math.PI/180);b.scale(a.scaleX,a.scaleY)},j=null!=a.current_skin_i?a.skins[a.current_skin_i]:null;if(j)for(var l in d){var h=d[l],f=h.attachment;if(f){var g=j.skin_slots[l];if(g){var k=c[h.bone],g=g.skin_attachments[f];b.save();e(k);b.translate(g.x,g.y);b.rotate(g.rotation*Math.PI/180);b.scale(g.scaleX,
g.scaleY);b.globalAlpha=h.a;h=g.name||f;(h=a.files&&a.files[h])&&h.image&&!h.image.hidden?(b.scale(1,-1),f=h.width,g=h.height,b.drawImage(h.image,-f/2,-g/2,f,g)):(f=g.width,g=g.height,b.fillStyle="rgba(127,127,127,0.5)",b.fillRect(-f/2,-g/2,f,g));b.restore()}}}}};
main.view_2d.prototype.debug_draw_pose_2d=function(a){if(a.m_skeleton){a.strike();this.draw_pose_2d(a);var b=this.ctx_2d,c=a.m_tweened_skel_bones,d=function(a){a.parent&&d(c[a.parent]);b.translate(a.x,a.y);b.rotate(a.rotation*Math.PI/180);b.scale(a.scaleX,a.scaleY)},e;for(e in c){a=c[e];var j=a.length||0;b.save();d(a);b.beginPath();b.arc(0,0,2,0,2*Math.PI,!1);0<j?(b.moveTo(0,-2),b.lineTo(j,0),b.lineTo(0,2)):(b.moveTo(-2,0),b.lineTo(-4,0),b.moveTo(2,0),b.lineTo(4,0),b.moveTo(0,-2),b.lineTo(0,-4),b.moveTo(0,
2),b.lineTo(0,4));b.strokeStyle="rgba(200,200,200,0.75)";b.stroke();b.scale(0.5,-0.5);b.fillText(e,0,0);b.restore()}}};
main.view_2d.prototype.draw_pose_2d=function(a){var b=a.m_skeleton;if(b){a.strike();var c=this.ctx_2d,d=a.m_tweened_skel_bones;a=a.m_tweened_skel_slots;var e=function(a){a.parent&&e(d[a.parent]);c.translate(a.x,a.y);c.rotate(a.rotation*Math.PI/180);c.scale(a.scaleX,a.scaleY)},j=null!=b.current_skin_i?b.skins[b.current_skin_i]:null;if(j)for(var l in a){var h=a[l],f=h.attachment;if(f){var g=j.skin_slots[l];if(g){var k=d[h.bone],g=g.skin_attachments[f];c.save();e(k);c.translate(g.x,g.y);c.rotate(g.rotation*
Math.PI/180);c.scale(g.scaleX,g.scaleY);c.globalAlpha=h.a;h=g.name||f;(h=b.files&&b.files[h])&&h.image&&!h.image.hidden?(c.scale(1,-1),f=h.width,g=h.height,c.drawImage(h.image,-f/2,-g/2,f,g)):(f=g.width,g=g.height,c.fillStyle="rgba(127,127,127,0.5)",c.fillRect(-f/2,-g/2,f,g));c.restore()}}}}};
main.view_gl=function(a){var b={},c=a.getContext("webgl",b);this.ctx_gl=c=(c=(c=c||a.getContext("experimental-webgl",b))||a.getContext("webkit-3d",b))||a.getContext("moz-webgl",b);c||(a.style.backgroundColor="rgba(127,0,0,1.0)");c&&!c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")&&!c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")&&window.console.log("No WebGL Compressed Texture S3TC");if(c){c.clearColor(0,0,0,0);c.clearDepth(1);c.depthFunc(c.LEQUAL);c.enable(c.DEPTH_TEST);c.blendFunc(c.ONE,
c.ONE_MINUS_SRC_ALPHA);c.enable(c.BLEND);c.viewport(0,0,c.canvas.width,c.canvas.height);this.uMatrixP=new Float32Array(16);this.uMatrixC=new Float32Array(16);this.uMatrixM=new Float32Array(16);this.uGlobalAlpha=new Float32Array(1);a=new fo.m3x2;a.selfScale(2/c.canvas.width,2/c.canvas.height);this.load_projection_mtx(a);this.load_camera_mtx(fo.m3x2.IDENTITY);this.load_modelview_mtx(fo.m3x2.IDENTITY);b=function(a,b){var d=c.createShader(b);c.shaderSource(d,a);c.compileShader(d);c.getShaderParameter(d,
c.COMPILE_STATUS)||(window.console.log(c.getShaderInfoLog(d)),c.deleteShader(d),d=null);return d};a="uniform mat4 uMatrixP;uniform mat4 uMatrixC;";a+="uniform mat4 uMatrixM;";a+="attribute vec3 aVertexPosition;";a+="attribute vec4 aVertexColor;";a+="attribute vec2 aVertexTexCoord;";a+="varying vec4 vColor;";a+="varying vec2 vTexCoord;";a+="void main(void) {";a+=" gl_Position = uMatrixP * uMatrixC * uMatrixM * vec4(aVertexPosition, 1.0);";a+=" vColor = aVertexColor;";a+=" vTexCoord = aVertexTexCoord;";
a+="}";a=b(a,c.VERTEX_SHADER);var d;d="precision mediump float;uniform float uGlobalAlpha;";d+="uniform sampler2D uSampler;";d+="varying vec4 vColor;";d+="varying vec2 vTexCoord;";d+="void main(void) {";d+=" gl_FragColor = texture2D(uSampler, vTexCoord.st);";d+=" gl_FragColor *= uGlobalAlpha;";d+="}";b=b(d,c.FRAGMENT_SHADER);d=c.createProgram();c.attachShader(d,a);c.attachShader(d,b);c.linkProgram(d);c.getProgramParameter(d,c.LINK_STATUS)||(window.console.log("could not link shader program"),c.deleteProgram(d),
d=null);a=this.program=d;a.uMatrixP=c.getUniformLocation(a,"uMatrixP");a.uMatrixC=c.getUniformLocation(a,"uMatrixC");a.uMatrixM=c.getUniformLocation(a,"uMatrixM");a.uGlobalAlpha=c.getUniformLocation(a,"uGlobalAlpha");a.uSampler=c.getUniformLocation(a,"uSampler");a.aVertexPosition=c.getAttribLocation(a,"aVertexPosition");a.aVertexColor=c.getAttribLocation(a,"aVertexColor");a.aVertexTexCoord=c.getAttribLocation(a,"aVertexTexCoord");a=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];b=this.vertex_position_buffer=c.createBuffer();
c.bindBuffer(c.ARRAY_BUFFER,b);c.bufferData(c.ARRAY_BUFFER,new Float32Array(a),c.STATIC_DRAW);b.itemType=c.FLOAT;b.itemSize=3;b.numItems=a.length/b.itemSize;a=[1,0,0,0.5,0,1,0,0.5,0,0,1,0.5,1,1,1,0.5];b=this.vertex_color_buffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b);c.bufferData(c.ARRAY_BUFFER,new Float32Array(a),c.STATIC_DRAW);b.itemType=c.FLOAT;b.itemSize=4;b.numItems=a.length/b.itemSize;a=[0,0,0,1,1,1,1,0];b=this.vertex_texcoord_buffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b);c.bufferData(c.ARRAY_BUFFER,
new Float32Array(a),c.STATIC_DRAW);b.itemType=c.FLOAT;b.itemSize=2;b.numItems=a.length/b.itemSize;a=[0,1,2,3];b=this.vertex_index_buffer=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),c.STATIC_DRAW);b.itemType=c.UNSIGNED_SHORT;b.itemSize=1;b.numItems=a.length/b.itemSize}};
main.set_a16_from_m3x2=function(a,b){a[0]=b.a_x;a[1]=b.a_y;a[2]=0;a[3]=0;a[4]=b.b_x;a[5]=b.b_y;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b.c_x;a[13]=b.c_y;a[14]=0;a[15]=1};main.view_gl.prototype.load_projection_mtx=function(a){main.set_a16_from_m3x2(this.uMatrixP,a)};main.view_gl.prototype.load_camera_mtx=function(a){main.set_a16_from_m3x2(this.uMatrixC,a)};main.view_gl.prototype.load_modelview_mtx=function(a){main.set_a16_from_m3x2(this.uMatrixM,a)};
main.view_gl.prototype.draw_pose_gl=function(a){var b=a.m_skeleton;if(b){a.strike();var c=this.ctx_gl,d=a.m_tweened_skel_bones;a=a.m_tweened_skel_slots;var e=new fo.m3x2,j=function(a){a.parent&&j(d[a.parent]);e.selfTranslate(a.x,a.y);e.selfRotateDegrees(a.rotation);e.selfScale(a.scaleY,a.scaleY)},l=null!=b.current_skin_i?b.skins[b.current_skin_i]:null;if(l)for(var h in a){var f=a[h],g=f.attachment;if(g){var k=l.skin_slots[h];if(k){var m=d[f.bone],k=k.skin_attachments[g];e.makeIdentity();j(m);e.selfTranslate(k.x,
k.y);e.selfRotateDegrees(k.rotation);e.selfScale(k.scaleX,k.scaleY);g=k.name||g;(g=b.files&&b.files[g])&&g.image&&!g.image.hidden?(m=g.width,k=g.height):(m=k.width,k=k.height);e.selfScale(m/2,k/2);this.load_modelview_mtx(e);this.uGlobalAlpha[0]=f.a;g&&(!g.texture&&g.image&&!g.image.hidden)&&(g.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,g.texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,
g.image),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindTexture(c.TEXTURE_2D,null));g&&g.texture&&(f=this.program,c.useProgram(f),c.uniformMatrix4fv(f.uMatrixP,!1,this.uMatrixP),c.uniformMatrix4fv(f.uMatrixC,!1,this.uMatrixC),c.uniformMatrix4fv(f.uMatrixM,!1,this.uMatrixM),c.uniform1fv(f.uGlobalAlpha,
this.uGlobalAlpha),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,g.texture),c.uniform1i(f.uSampler,0),c.bindBuffer(c.ARRAY_BUFFER,this.vertex_position_buffer),c.vertexAttribPointer(f.aVertexPosition,this.vertex_position_buffer.itemSize,this.vertex_position_buffer.itemType,!1,0,0),c.enableVertexAttribArray(f.aVertexPosition),c.bindBuffer(c.ARRAY_BUFFER,this.vertex_color_buffer),c.vertexAttribPointer(f.aVertexColor,this.vertex_color_buffer.itemSize,this.vertex_color_buffer.itemType,!1,0,0),
c.enableVertexAttribArray(f.aVertexColor),c.bindBuffer(c.ARRAY_BUFFER,this.vertex_texcoord_buffer),c.vertexAttribPointer(f.aVertexTexCoord,this.vertex_texcoord_buffer.itemSize,this.vertex_texcoord_buffer.itemType,!1,0,0),c.enableVertexAttribArray(f.aVertexTexCoord),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.vertex_index_buffer),c.drawElements(c.TRIANGLE_FAN,this.vertex_index_buffer.numItems,this.vertex_index_buffer.itemType,0))}}}}};
main.test_draw_bezier_curves=function(a,b){b.save();b.translate(0,b.canvas.height);b.scale(1,-1);b.translate(b.canvas.width/4,b.canvas.height/4);b.scale(0.5,0.5);b.lineWidth=4;b.strokeStyle="black";b.strokeRect(0,0,b.canvas.width,b.canvas.height);var c=Math.cos(a.time/1E3),d=Math.sin(a.time/1E3),c=Math.min(Math.max(c,0),1),e=1-Math.cos(2*a.time/1E3),j=1-Math.sin(2*a.time/1E3),e=Math.min(Math.max(e,0),1),l=spine.step_bezier_curve(c,d,e,j),h=spine.bezier_curve(c,d,e,j,1E-6);b.beginPath();b.moveTo(0,
0);for(var f=0;1.01>f;f+=0.01){var g=f*b.canvas.width,k=l(f)*b.canvas.height;b.lineTo(g,k)}b.strokeStyle="red";b.stroke();b.beginPath();b.moveTo(0,0);for(f=0;1.01>f;f+=0.01)g=f*b.canvas.width,k=h(f)*b.canvas.height,b.lineTo(g,k);b.strokeStyle="green";b.stroke();b.beginPath();b.moveTo(0,0);b.lineTo(c*b.canvas.width,d*b.canvas.height);b.arc(c*b.canvas.width,d*b.canvas.height,10,0,2*Math.PI);b.strokeStyle="blue";b.stroke();b.beginPath();b.moveTo(b.canvas.width,b.canvas.height);b.lineTo(e*b.canvas.width,
j*b.canvas.height);b.arc(e*b.canvas.width,j*b.canvas.height,10,0,2*Math.PI);b.strokeStyle="blue";b.stroke();g=0.5+0.5*Math.cos(3*a.time/1E3);d=l(g);j=h(g);b.beginPath();b.moveTo(g*b.canvas.width,0);b.lineTo(g*b.canvas.width,d*b.canvas.height);b.arc(g*b.canvas.width,d*b.canvas.height,10,0,2*Math.PI);b.strokeStyle="blue";b.stroke();b.beginPath();b.moveTo(g*b.canvas.width,0);b.lineTo(g*b.canvas.width,j*b.canvas.height);b.strokeStyle="blue";b.stroke();b.restore()};
