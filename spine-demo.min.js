var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.define=function(a,b){var c=b;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,c)};goog.DEBUG=!1;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,h=0;d=b[h];h++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var p in d.requires[e])if(!goog.isProvided_(p))if(p in d.nameToPath)a(d.nameToPath[p]);else throw Error("Undefined nameToPath for "+p);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,h){var p=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,p)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),h=!1,p=a.constructor;p;p=p.superClass_&&p.superClass_.constructor)if(p.prototype[b]===d)h=!0;else if(h)return p.prototype[b].apply(a,
e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);var spine={toBool:function(a,b){return void 0!==a?"true"===a?!0:!1:b||!1},toInt:function(a,b){return void 0!==a?parseInt(a,10):b||0},toFloat:function(a,b){return void 0!==a?parseFloat(a):b||0},toString:function(a,b){return void 0!==a?a:b||""},toArray:function(a,b){return a?a.length?a:[a]:b||[]},color:function(){this.rgba=4294967295;this.a=this.b=this.g=this.r=1}};spine.color.prototype.copy=function(a){this.rgba=a.rgba;this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a;return this};
spine.color.prototype.load=function(a){this.rgba=void 0!==a?parseInt(a,16):4294967295;this.r=(this.rgba>>24&255)/255;this.g=(this.rgba>>16&255)/255;this.b=(this.rgba>>8&255)/255;this.a=(this.rgba&255)/255;return this};
spine.bezier_curve=function(a,b,c,d,e){function h(b){var d=b*b,e=1-b;return 3*a*e*e*b+3*c*e*d+d*b}function p(a){var c=a*a,e=1-a;return 3*b*e*e*a+3*d*e*c+c*a}e=e||1E-6;return function(b){var d,f,k,m;k=b;for(d=0;8>d;++d){m=h(k)-b;if(Math.abs(m)<e)return p(k);f=k*k;f=3*a*k-3*(2*a-c)*f+(3*a-3*c+1)*f*k;if(1E-6>Math.abs(f))break;k-=m/f}d=0;f=1;k=b;if(k<d)return p(d);if(k>f)return p(f);for(;d<f;){m=h(k);if(Math.abs(m-b)<e)break;b>m?d=k:f=k;k=.5*(f-d)+d}return p(k)}};
spine.step_bezier_curve=function(a,b,c,d){var e=.1*.1,h=.1*e,p=3*.1,l=3*e,e=6*e,g=6*h,f=2*-a+c,k=2*-b+d;c=3*(a-c)+1;d=3*(b-d)+1;var m=a*p+f*l+c*h,n=b*p+k*l+d*h,r=f*e+c*g,q=k*e+d*g,s=c*g,u=d*g;return function(a){for(var b=m,c=n,d=r,e=q,f=b,h=c,g=8;;){if(f>=a)return b=f-b,c=h-c,c+(h-c)*(a-b)/(f-b);if(0===g)break;g--;b+=d;c+=e;d+=s;e+=u;f+=b;h+=c}return h+(1-h)*(a-f)/(1-f)}};
spine.toCurve=function(a,b){if(void 0!==a){if("stepped"===a)return function(a){return 0};if(4===a.length){var c=parseFloat(a[0]),d=parseFloat(a[1]),e=parseFloat(a[2]),h=parseFloat(a[3]);return spine.step_bezier_curve(c,d,e,h)}}return b||function(a){return a}};spine.tween=function(a,b,c){return a+(b-a)*c};spine.wrapAngle=function(a){for(;180<=a;)a-=360;for(;-180>a;)a+=360;return a};spine.tweenAngle=function(a,b,c){return spine.wrapAngle(a+spine.wrapAngle(b-a)*c)};
spine.skel_bone=function(){this.parent=null;this.rotation=this.y=this.x=this.length=0;this.scaleY=this.scaleX=1;this.inheritScale=this.inheritRotation=!0};spine.skel_bone.prototype.copy=function(a){this.parent=a.parent;this.length=a.length;this.x=a.x;this.y=a.y;this.rotation=a.rotation;this.scaleX=a.scaleX;this.scaleY=a.scaleY;this.inheritRotation=a.inheritRotation;this.inheritScale=a.inheritScale;return this};
spine.skel_bone.prototype.load=function(a){this.parent=spine.toString(a.parent,null);this.length=spine.toFloat(a.length,0);this.x=spine.toFloat(a.x,0);this.y=spine.toFloat(a.y,0);this.rotation=spine.toFloat(a.rotation,0);this.scaleX=spine.toFloat(a.scaleX,1);this.scaleY=spine.toFloat(a.scaleY,1);this.inheritRotation=spine.toBool(a.inheritRotation,!0);this.inheritScale=spine.toBool(a.inheritScale,!0);return this};
spine.skel_slot=function(){this.bone="";this.color=new spine.color;this.attachment=null;this.additive=!1};spine.skel_slot.prototype.copy=function(a){this.bone=a.bone;this.color.copy(a.color);this.attachment=a.attachment;this.additive=a.additive;return this};spine.skel_slot.prototype.load=function(a){this.bone=spine.toString(a.bone,null)||"";this.color.load(a.color);this.attachment=spine.toString(a.attachment,null);this.additive=spine.toBool(a.additive,!1);return this};
spine.skin_attachment=function(){this.name=null;this.type="region";this.rotation=this.y=this.x=0;this.scaleY=this.scaleX=1;this.height=this.width=0};
spine.skin_attachment.prototype.load=function(a){this.name=a.name||null;this.type=spine.toString(a.type,"region");this.x=spine.toFloat(a.x,0);this.y=spine.toFloat(a.y,0);this.rotation=spine.toFloat(a.rotation,0);this.scaleX=spine.toFloat(a.scaleX,1);this.scaleY=spine.toFloat(a.scaleY,1);this.width=spine.toFloat(a.width,0);this.height=spine.toFloat(a.height,0);return this};spine.skin_slot=function(){this.skin_attachments={}};
spine.skin_slot.prototype.load=function(a){for(var b in a)this.skin_attachments[b]=(new spine.skin_attachment).load(a[b]);return this};spine.skin=function(){this.skin_slots={}};spine.skin.prototype.load=function(a){for(var b in a)this.skin_slots[b]=(new spine.skin_slot).load(a[b]);return this};spine.event=function(){this.name=null;this["int"]=null;this.string=this["float"]=null};
spine.event.prototype.copy=function(a){this.name=a.name;this["int"]=a["int"];this["float"]=a["float"];this.string=a.string;return this};spine.event.prototype.load=function(a){"undefined"!==typeof a.name&&(this.name=spine.toString(a.name,""));"undefined"!==typeof a["int"]&&(this["int"]=spine.toInt(a["int"],0));"undefined"!==typeof a["float"]&&(this["float"]=spine.toFloat(a["float"],0));"undefined"!==typeof a.string&&(this.string=spine.toString(a.string,""));return this};
spine.keyframe=function(a){this.time=a||0};spine.keyframe.prototype.load=function(a){this.time=1E3*spine.toFloat(a.time,0);return this};spine.keyframe.find=function(a,b){if(!a||0>=a.length||b<a[0].time)return-1;var c=a.length-1;if(b>=a[c].time)return c;var d=0;if(0===c)return 0;for(var e=c>>1;;){a[e+1].time<=b?d=e+1:c=e;if(d===c)return d;e=d+c>>1}};spine.keyframe.compare=function(a,b){return a.time-b.time};
spine.translate_keyframe=function(a){spine.keyframe.call(this,a);this.y=this.x=0;this.curve=function(a){return a}};goog.inherits(spine.translate_keyframe,spine.keyframe);spine.translate_keyframe.prototype.load=function(a){spine.translate_keyframe.superClass_.load.call(this,a);this.x=spine.toFloat(a.x,0);this.y=spine.toFloat(a.y,0);this.curve=spine.toCurve(a.curve);return this};spine.rotate_keyframe=function(a){spine.keyframe.call(this,a);this.angle=0;this.curve=function(a){return a}};
goog.inherits(spine.rotate_keyframe,spine.keyframe);spine.rotate_keyframe.prototype.load=function(a){spine.rotate_keyframe.superClass_.load.call(this,a);this.angle=spine.toFloat(a.angle,0);this.curve=spine.toCurve(a.curve);return this};spine.scale_keyframe=function(a){spine.keyframe.call(this,a);this.scaleY=this.scaleX=0;this.curve=function(a){return a}};goog.inherits(spine.scale_keyframe,spine.keyframe);
spine.scale_keyframe.prototype.load=function(a){spine.scale_keyframe.superClass_.load.call(this,a);this.scaleX=spine.toFloat(a.x,1);this.scaleY=spine.toFloat(a.y,1);this.curve=spine.toCurve(a.curve);return this};spine.anim_bone=function(){this.max_time=this.min_time=0;this.scale_keyframes=this.rotate_keyframes=this.translate_keyframes=null};
spine.anim_bone.prototype.load=function(a){this.max_time=this.min_time=0;this.scale_keyframes=this.rotate_keyframes=this.translate_keyframes=null;if(a.translate){this.translate_keyframes=[];for(var b=0;b<a.translate.length;++b){var c=(new spine.translate_keyframe).load(a.translate[b]);this.translate_keyframes.push(c);this.min_time=Math.min(this.min_time,c.time);this.max_time=Math.max(this.max_time,c.time)}this.translate_keyframes=this.translate_keyframes.sort(spine.keyframe.compare)}if(a.rotate){this.rotate_keyframes=
[];for(b=0;b<a.rotate.length;++b)c=(new spine.rotate_keyframe).load(a.rotate[b]),this.rotate_keyframes.push(c),this.min_time=Math.min(this.min_time,c.time),this.max_time=Math.max(this.max_time,c.time);this.rotate_keyframes=this.rotate_keyframes.sort(spine.keyframe.compare)}if(a.scale){this.scale_keyframes=[];for(b=0;b<a.scale.length;++b)c=(new spine.scale_keyframe).load(a.scale[b]),this.scale_keyframes.push(c),this.min_time=Math.min(this.min_time,c.time),this.max_time=Math.max(this.max_time,c.time);
this.scale_keyframes=this.scale_keyframes.sort(spine.keyframe.compare)}return this};spine.color_keyframe=function(a){spine.keyframe.call(this,a);this.color=new spine.color;this.curve=function(a){return a}};goog.inherits(spine.color_keyframe,spine.keyframe);spine.color_keyframe.prototype.load=function(a){spine.color_keyframe.superClass_.load.call(this,a);this.color.load(a.color);this.curve=spine.toCurve(a.curve);return this};
spine.attachment_keyframe=function(a){spine.keyframe.call(this,a);this.name=null};goog.inherits(spine.attachment_keyframe,spine.keyframe);spine.attachment_keyframe.prototype.load=function(a){spine.attachment_keyframe.superClass_.load.call(this,a);this.name=spine.toString(a.name,null);return this};spine.anim_slot=function(){this.max_time=this.min_time=0;this.attachment_keyframes=this.color_keyframes=null};
spine.anim_slot.prototype.load=function(a){this.max_time=this.min_time=0;this.attachment_keyframes=this.color_keyframes=null;if(a.color){this.color_keyframes=[];for(var b=0;b<a.color.length;++b){var c=(new spine.color_keyframe).load(a.color[b]);this.min_time=Math.min(this.min_time,c.time);this.max_time=Math.max(this.max_time,c.time);this.color_keyframes.push(c)}this.color_keyframes=this.color_keyframes.sort(spine.keyframe.compare)}if(a.attachment){this.attachment_keyframes=[];for(b=0;b<a.attachment.length;++b)c=
(new spine.attachment_keyframe).load(a.attachment[b]),this.min_time=Math.min(this.min_time,c.time),this.max_time=Math.max(this.max_time,c.time),this.attachment_keyframes.push(c);this.attachment_keyframes=this.attachment_keyframes.sort(spine.keyframe.compare)}return this};spine.event_keyframe=function(a){spine.keyframe.call(this,a);this.name=null;this["int"]=null;this.string=this["float"]=null};goog.inherits(spine.event_keyframe,spine.keyframe);
spine.event_keyframe.prototype.load=function(a){spine.event_keyframe.superClass_.load.call(this,a);"undefined"!==typeof a.name&&(this.name=spine.toString(a.name,""));"undefined"!==typeof a["int"]&&(this["int"]=spine.toInt(a["int"],0));"undefined"!==typeof a["float"]&&(this["float"]=spine.toFloat(a["float"],0));"undefined"!==typeof a.string&&(this.string=spine.toString(a.string,""));return this};spine.slot_offset=function(){this.slot="";this.offset=0};
spine.slot_offset.prototype.load=function(a){this.slot=spine.toString(a.slot,"");this.offset=spine.toInt(a.offset,0);return this};spine.draworder_keyframe=function(a){spine.keyframe.call(this,a);this.slot_offsets=[]};goog.inherits(spine.draworder_keyframe,spine.keyframe);
spine.draworder_keyframe.prototype.load=function(a){spine.draworder_keyframe.superClass_.load.call(this,a);this.slot_offsets=[];if(a.offsets)for(var b=0;b<a.offsets.length;++b)this.slot_offsets.push((new spine.slot_offset).load(a.offsets[b]));return this};spine.animation=function(){this.draworder_keyframes=this.event_keyframes=this.anim_slots=this.anim_bones=this.name=null;this.length=this.max_time=this.min_time=0};
spine.animation.prototype.load=function(a){this.draworder_keyframes=this.event_keyframes=this.anim_slots=this.anim_bones=null;this.max_time=this.min_time=0;if(a.bones){this.anim_bones={};for(var b in a.bones){var c=(new spine.anim_bone).load(a.bones[b]);this.min_time=Math.min(this.min_time,c.min_time);this.max_time=Math.max(this.max_time,c.max_time);this.anim_bones[b]=c}}if(a.slots){this.anim_slots={};for(var d in a.slots)b=(new spine.anim_slot).load(a.slots[d]),this.min_time=Math.min(this.min_time,
b.min_time),this.max_time=Math.max(this.max_time,b.max_time),this.anim_slots[d]=b}if(a.events){this.event_keyframes=[];for(d=0;d<a.events.length;++d)b=(new spine.event_keyframe).load(a.events[d]),this.min_time=Math.min(this.min_time,b.time),this.max_time=Math.max(this.max_time,b.time),this.event_keyframes.push(b);this.event_keyframes=this.event_keyframes.sort(spine.keyframe.compare)}if(a.draworder){this.draworder_keyframes=[];for(d=0;d<a.draworder.length;++d)b=(new spine.draworder_keyframe).load(a.draworder[d]),
this.min_time=Math.min(this.min_time,b.time),this.max_time=Math.max(this.max_time,b.time),this.draworder_keyframes.push(b);this.draworder_keyframes=this.draworder_keyframes.sort(spine.keyframe.compare)}this.length=this.max_time-this.min_time;return this};spine.skeleton=function(){this.skins=this.skel_slot_keys=this.skel_slots=this.skel_bone_keys=this.skel_bones=this.name=null};
spine.skeleton.prototype.load=function(a){this.skins=this.skel_slot_keys=this.skel_slots=this.skel_bone_keys=this.skel_bones=null;if(a.bones){this.skel_bones={};this.skel_bone_keys=[];for(var b=0;b<a.bones.length;++b){var c=a.bones[b];this.skel_bones[c.name]=(new spine.skel_bone).load(c);this.skel_bone_keys[b]=c.name}}if(a.slots)for(this.skel_slots={},this.skel_slot_keys=[],b=0;b<a.slots.length;++b)c=a.slots[b],this.skel_slots[c.name]=(new spine.skel_slot).load(c),this.skel_slot_keys[b]=c.name;if(a.skins){this.skins=
{};for(var d in a.skins)b=a.skins[d],this.skins[d]=(new spine.skin).load(b)}return this};spine.data=function(){this.name=null;this.skeleton=new spine.skeleton;this.animations=this.events=null};spine.data.prototype.load=function(a){this.animations=this.events=null;this.loadSkeleton(a);if(a.events){this.events={};for(var b in a.events)this.loadEvent(b,a.events[b])}if(a.animations){this.animations={};for(var c in a.animations)this.loadAnimation(c,a.animations[c])}return this};
spine.data.prototype.loadSkeleton=function(a){this.skeleton.load(a);return this};spine.data.prototype.loadEvent=function(a,b){this.events[a]=(new spine.event).load(b);return this};spine.data.prototype.loadAnimation=function(a,b){this.animations[a]=(new spine.animation).load(b);return this};spine.data.prototype.getSkins=function(){return this.skeleton.skins};spine.data.prototype.getEvents=function(){return this.events};spine.data.prototype.getAnims=function(){return this.animations};
spine.pose=function(a){this.data=a||null;this.anim_key=this.skin_key="";this.elapsed_time=this.time=0;this.dirty=!0;this.tweened_skel_bones={};this.tweened_skel_slots={};this.tweened_events=[];this.tweened_skel_slot_keys=[]};spine.pose.prototype.curSkel=function(){return this.data&&this.data.skeleton};spine.pose.prototype.getSkins=function(){return this.data&&this.data.getSkins()};spine.pose.prototype.curSkin=function(){var a=this.getSkins();return a&&a[this.skin_key]};
spine.pose.prototype.getSkin=function(){return this.skin_key};spine.pose.prototype.setSkin=function(a){this.skin_key!==a&&(this.skin_key=a)};spine.pose.prototype.getEvents=function(){return this.data&&this.data.getEvents()};spine.pose.prototype.getAnims=function(){return this.data&&this.data.getAnims()};spine.pose.prototype.curAnim=function(){var a=this.getAnims();return a&&a[this.anim_key]};spine.pose.prototype.getAnim=function(){return this.anim_key};
spine.pose.prototype.setAnim=function(a){if(this.anim_key!==a){this.anim_key=a;if((a=this.curAnim())&&0<a.length){for(;this.time<a.min_time;)this.time+=a.length;for(;this.time>a.max_time;)this.time-=a.length}this.elapsed_time=0;this.dirty=!0}};spine.pose.prototype.getTime=function(){return this.time};
spine.pose.prototype.setTime=function(a){if(this.time!==a){this.time=a;if((a=this.curAnim())&&0<a.length){for(;this.time<a.min_time;)this.time+=a.length;for(;this.time>a.max_time;)this.time-=a.length}this.elapsed_time=0;this.dirty=!0}};spine.pose.prototype.update=function(a){this.setTime(this.getTime()+a)};
spine.pose.prototype.strike=function(){if(this.dirty){this.dirty=!1;var a=this.curSkel(),b=a&&a.skel_bones,c=a&&a.skel_slots,d=a&&a.skel_slot_keys,e=(a=this.curAnim())&&a.anim_bones,h=a&&a.anim_slots,p=this.getEvents(),l=this.time,g=this.elapsed_time;this.elapsed_time=0;for(var f in b){var k=b[f],m=this.tweened_skel_bones[f]||(this.tweened_skel_bones[f]=new spine.skel_bone);m.copy(k);if(k=e&&e[f]){var n=k.translate_keyframes;if(n){var r=spine.keyframe.find(n,l);if(-1!==r){var q=n[r],r=r+1;r<n.length?
(r=n[r],n=(l-q.time)/(r.time-q.time),n=q.curve(n),m.x+=spine.tween(q.x,r.x,n),m.y+=spine.tween(q.y,r.y,n)):(m.x+=q.x,m.y+=q.y)}}if(n=k.rotate_keyframes)r=spine.keyframe.find(n,l),-1!==r&&(q=n[r],r+=1,r<n.length?(r=n[r],n=(l-q.time)/(r.time-q.time),n=q.curve(n),m.rotation+=spine.tweenAngle(q.angle,r.angle,n)):m.rotation+=q.angle);if(n=k.scale_keyframes)q=spine.keyframe.find(n,l),-1!==q&&(k=n[q],q+=1,q<n.length?(q=n[q],n=(l-k.time)/(q.time-k.time),n=k.curve(n),m.scaleX+=spine.tween(k.scaleX,q.scaleX,
n)-1,m.scaleY+=spine.tween(k.scaleY,q.scaleY,n)-1):(m.scaleX+=k.scaleX-1,m.scaleY+=k.scaleY-1))}}for(var s in c)if(f=c[s],b=this.tweened_skel_slots[s]||(this.tweened_skel_slots[s]=new spine.skel_slot),b.copy(f),f=h&&h[s]){if(m=f.color_keyframes)k=spine.keyframe.find(m,l),-1!==k&&(e=m[k],k+=1,k<m.length?(m=m[k],n=(l-e.time)/(m.time-e.time),n=e.curve(n),b.color.r=spine.tween(e.color.r,m.color.r,n),b.color.g=spine.tween(e.color.g,m.color.g,n),b.color.b=spine.tween(e.color.b,m.color.b,n),b.color.a=spine.tween(e.color.a,
m.color.a,n)):(b.color.r=e.color.r,b.color.g=e.color.g,b.color.b=e.color.b,b.color.a=e.color.a));if(f=f.attachment_keyframes)e=spine.keyframe.find(f,l),-1!==e&&(b.attachment=f[e].name)}this.tweened_events=[];c=function(a,b){var c=new spine.event,d=p&&p[b.name];d&&c.copy(d);"undefined"!==typeof b["int"]&&(c["int"]=b["int"]);"undefined"!==typeof b["float"]&&(c["float"]=b["float"]);"undefined"!==typeof b.string&&(c.string=b.string);a.push(c)};if(a&&(s=l-g,h=0<g&&s<a.min_time,0>g&&s>a.max_time?(h=spine.keyframe.find(a.event_keyframes,
a.min_time),-1!==h&&(h=a.event_keyframes[h],c(this.tweened_events,h))):h&&(h=spine.keyframe.find(a.event_keyframes,a.max_time),-1!==h&&(h=a.event_keyframes[h],c(this.tweened_events,h))),h=spine.keyframe.find(a.event_keyframes,l),-1!==h&&(h=a.event_keyframes[h],(0>g&&l<=h.time&&h.time<=s||0<g&&s<=h.time&&h.time<=l)&&c(this.tweened_events,h)),this.tweened_skel_slot_keys=d.slice(0),d=spine.keyframe.find(a.draworder_keyframes,l),-1!==d))for(a=a.draworder_keyframes[d].slot_offsets,d=0;d<a.length;++d)l=
a[d],g=this.tweened_skel_slot_keys.indexOf(l.slot),0<=g&&this.tweened_skel_slot_keys.splice(g+l.offset,0,this.tweened_skel_slot_keys.splice(g,1))}};var fo={v2:function(a,b){this.x=a||0;this.y=b||0}};fo.v2.ZERO=new fo.v2;fo.v2.prototype.makeZero=function(){this.y=this.x=0;return this};fo.v2.prototype.selfTranslate=function(a,b){this.x+=a;this.y+=b;return this};fo.v2.prototype.selfRotate=function(a,b){var c=this.x,d=this.y;this.x=c*a-d*b;this.y=c*b+d*a;return this};fo.v2.prototype.selfRotateRadians=function(a){return this.selfRotate(Math.cos(a),Math.sin(a))};
fo.v2.prototype.selfRotateDegrees=function(a){return this.selfRotateRadians(a*Math.PI/180)};fo.v2.prototype.selfScale=function(a,b){this.x*=a;this.y*=b;return this};fo.m3x2=function(){this.a_x=1;this.a_y=this.c_x=this.b_x=0;this.b_y=1;this.c_y=0};fo.m3x2.IDENTITY=new fo.m3x2;fo.m3x2.prototype.makeIdentity=function(){this.a_x=1;this.a_y=this.c_x=this.b_x=0;this.b_y=1;this.c_y=0;return this};
fo.m3x2.prototype.selfTranslate=function(a,b){this.c_x+=this.a_x*a+this.b_x*b;this.c_y+=this.a_y*a+this.b_y*b;return this};fo.m3x2.prototype.selfRotate=function(a,b){var c=this.a_x,d=this.a_y,e=this.b_x,h=this.b_y,p=-b;this.a_x=c*a+e*b;this.a_y=d*a+h*b;this.b_x=c*p+e*a;this.b_y=d*p+h*a;return this};fo.m3x2.prototype.selfRotateRadians=function(a){return this.selfRotate(Math.cos(a),Math.sin(a))};fo.m3x2.prototype.selfRotateDegrees=function(a){return this.selfRotateRadians(a*Math.PI/180)};
fo.m3x2.prototype.selfScale=function(a,b){this.a_x*=a;this.a_y*=a;this.b_x*=b;this.b_y*=b;return this};fo.m3x2.prototype.applyVector=function(a,b){var c=a.x,d=a.y;b.x=this.a_x*c+this.b_x*d+this.c_x;b.y=this.a_y*c+this.b_y*d+this.c_y;return b};var main={start:function(){document.body.appendChild(document.createElement("div"));document.body.appendChild(document.createElement("div"));var a=document.body.appendChild(document.createElement("div")),b=document.body.appendChild(document.createElement("div"));document.body.appendChild(document.createElement("div"));document.body.appendChild(document.createElement("div"));var c=document.body.appendChild(document.createElement("div"));a.style.display="inline-block";var d=0,e=0,h=1,p=function(a){var b=
main.get_pose_extent(a),c=a.getAnims(),f;for(f in c){a.setAnim(f);for(var g=a.curAnim(),c=g.min_time,g=g.max_time;c<g;c+=100)a.setTime(c),b=main.get_pose_extent(a,b)}d=(b.max.x+b.min.x)/2;e=(b.max.y+b.min.y)/2;h=1/Math.min(320/(b.max.x-b.min.x),240/(b.max.y-b.min.y));h*=1.1},l=new spine.pose,g=new spine.data;b.innerHTML="Loading...";main.load_data_from_url(g,"data/examples/dragon/dragon.json",function(a){return function(){b.innerHTML="Name: data/examples/dragon/dragon.json";l=new spine.pose(a);for(var c in a.getSkins()){l.setSkin(c);
break}for(var d in a.getAnims()){l.setAnim(d);break}p(l);c=a.skeleton;if(d=l.curSkin())for(var e in d.skin_slots){var f=d.skin_slots[e];if(f)for(var h in f.skin_attachments){var g=f.skin_attachments[h],k=g.name||h,m=c.files&&c.files[k];if(!m){var n="data/examples/dragon/dragon.json".slice(0,20),m=c.files[k]={};m.width=g.width||0;m.height=g.height||0;g=m.image=new Image;g.hidden=!0;g.addEventListener("load",function(a){return function(b){a.width=a.width||b.target.width;a.height=a.height||b.target.height;
b.target.hidden=!1}}(m),!1);g.addEventListener("error",function(a){},!1);g.addEventListener("abort",function(a){},!1);g.src=n+"/"+k+".png"}}}}}(g));var f=0,k=0,m=!1,n=0,r=0;a.addEventListener("mousedown",function(a){m=!0;n=a.clientX;r=a.clientY},!1);a.addEventListener("mouseup",function(a){m=!1},!1);a.addEventListener("mousemove",function(a){f=a.clientX;k=a.clientY;if(m){var b=f-n,c=k-r,b=b*h,c=-c*h,g=0*Math.PI/180;a=Math.cos(g);g=Math.sin(g);d-=b*a-c*g;e-=b*g+c*a;n=f;r=k}},!1);a.addEventListener("mousewheel",
function(a){0>a.wheelDelta?(h*=1.1,h=Math.min(h,100)):0<a.wheelDelta&&(h*=.9,h=Math.max(h,.01))},!1);var q=a.appendChild(document.createElement("div"));q.style.display="inline-block";g=q.appendChild(document.createElement("div"));g.innerHTML="2D Canvas";g=q.appendChild(document.createElement("canvas"));g.style.display="inline-block";g.style.border="1px solid black";g.width=320;g.height=240;var s=new main.view_2d(g),a=a.appendChild(document.createElement("div"));a.style.display="inline-block";g=a.appendChild(document.createElement("div"));
g.innerHTML="WebGL Canvas";a=a.appendChild(document.createElement("canvas"));a.style.display="inline-block";a.style.border="1px solid black";a.width=320;a.height=240;var u=new main.view_gl(a),t=1,a=c.appendChild(document.createElement("span")),g=c.appendChild(document.createElement("input")),x=c.appendChild(document.createElement("span"));a.innerHTML="Time Scale: ";g.type="range";g.min=-2;g.max=2;g.step=.01;g.value=t;x.innerHTML=t;g.addEventListener("change",function(a){t=parseFloat(a.target.value);
x.innerHTML=t.toFixed(2)},!1);var v=!1,a=c.appendChild(document.createElement("input")),c=c.appendChild(document.createElement("span"));a.type="checkbox";a.checked=v;c.innerHTML="Debug Draw";a.addEventListener("change",function(a){v=a.target.checked},!1);var B=0,y=0,w=0,z=0,A=function(a){window.requestAnimationFrame(A,null);++B;y=a;z=Math.min(y-w,50);l.update(z*t);w=a;if(a=s.ctx_2d){a.clearRect(0,0,a.canvas.width,a.canvas.height);a.save();a.translate(a.canvas.width/2,a.canvas.height/2);a.scale(1,
-1);a.scale(1/h,1/h);a.rotate(-0*Math.PI/180);a.translate(-d,-e);if(v){s.debug_draw_skeleton_2d(l);s.debug_draw_pose_2d(l);var b=main.get_pose_extent(l);a.strokeStyle="blue";a.strokeRect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}else s.draw_pose_2d(l);a.restore()}if(a=u.ctx_gl)a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),b=new fo.m3x2,b.selfScale(1/h,1/h),b.selfRotateDegrees(-0),b.selfTranslate(-d,-e),u.load_camera_mtx(b),u.draw_pose_gl(l),a.flush()};A(w)},load_data_from_url:function(a,b,
c){var d=a.skeleton;d.files={};var e=new XMLHttpRequest;e.open("GET",b,!0);e.addEventListener("readystatechange",function(b){4!=e.readyState||200!=e.status&&304!=e.status||(a.load(goog.global.JSON.parse(b.target.responseText)),c())},!1);e.send();return d},get_pose_extent:function(a,b){b=b||{min:{x:1,y:1},max:{x:-1,y:-1}};var c=a.data;if(!c)return b;c=c.skeleton;if(!c)return b;var d=function(a){b.min.x>b.max.x?(b.min.x=b.max.x=a.x,b.min.y=b.max.y=a.y):(b.min.x=Math.min(b.min.x,a.x),b.max.x=Math.max(b.max.x,
a.x),b.min.y=Math.min(b.min.y,a.y),b.max.y=Math.max(b.max.y,a.y))},e=new fo.m3x2,h=new fo.v2(-1,-1),p=new fo.v2(1,-1),l=new fo.v2(-1,1),g=new fo.v2(1,1),f=new fo.v2(0,0);a.strike();var k=a.tweened_skel_bones,m=a.tweened_skel_slots,e=new fo.m3x2,n=function(a){a.parent&&n(k[a.parent]);e.selfTranslate(a.x,a.y);e.selfRotateDegrees(a.rotation);e.selfScale(a.scaleY,a.scaleY)},r=a.curSkin();if(r)for(var q in m){var s=m[q],u=s.attachment;if(u){var t=r.skin_slots[q];t&&(s=k[s.bone],t=t.skin_attachments[u],
e.makeIdentity(),n(s),e.selfTranslate(t.x,t.y),e.selfRotateDegrees(t.rotation),e.selfScale(t.scaleX,t.scaleY),u=t.name||u,(s=c.files&&c.files[u])&&s.image&&!s.image.hidden?(u=s.width,t=s.height):(u=t.width,t=t.height),e.selfScale(u/2,t/2),d(e.applyVector(l,f)),d(e.applyVector(g,f)),d(e.applyVector(p,f)),d(e.applyVector(h,f)))}}return b},view_2d:function(a){this.ctx_2d=a.getContext("2d")}};
main.view_2d.prototype.debug_draw_skeleton_2d=function(a){this.draw_skeleton_2d(a);if(a=a.data)if(a=a.skeleton){var b=this.ctx_2d,c=a.skel_bones,d=function(a){a.parent&&d(c[a.parent]);b.translate(a.x,a.y);b.rotate(a.rotation*Math.PI/180);b.scale(a.scaleX,a.scaleY)},e;for(e in c){a=c[e];var h=a.length||0;b.save();d(a);b.beginPath();b.arc(0,0,2,0,2*Math.PI,!1);0<h?(b.moveTo(0,-2),b.lineTo(h,0),b.lineTo(0,2)):(b.moveTo(-2,0),b.lineTo(-4,0),b.moveTo(2,0),b.lineTo(4,0),b.moveTo(0,-2),b.lineTo(0,-4),b.moveTo(0,
2),b.lineTo(0,4));b.strokeStyle="rgba(200,200,200,0.75)";b.stroke();b.scale(.5,-.5);b.fillText(e,0,0);b.restore()}}};
main.view_2d.prototype.draw_skeleton_2d=function(a){var b=a.data;if(b&&(b=b.skeleton)){var c=this.ctx_2d,d=b.skel_bones,e=b.skel_slots,h=function(a){a.parent&&h(d[a.parent]);c.translate(a.x,a.y);c.rotate(a.rotation*Math.PI/180);c.scale(a.scaleX,a.scaleY)};if(a=a.curSkin())for(var p in e){var l=e[p],g=l.attachment;if(g){var f=a.skin_slots[p];if(f){var k=d[l.bone],f=f.skin_attachments[g];c.save();h(k);c.translate(f.x,f.y);c.rotate(f.rotation*Math.PI/180);c.scale(f.scaleX,f.scaleY);c.globalAlpha=l.color.a;
l=f.name||g;(l=b.files&&b.files[l])&&l.image&&!l.image.hidden?(c.scale(1,-1),g=l.width,f=l.height,c.drawImage(l.image,-g/2,-f/2,g,f)):(g=f.width,f=f.height,c.fillStyle="rgba(127,127,127,0.5)",c.fillRect(-g/2,-f/2,g,f));c.restore()}}}}};
main.view_2d.prototype.debug_draw_pose_2d=function(a){var b=a.data;if(b&&b.skeleton){a.strike();this.draw_pose_2d(a);var c=this.ctx_2d,d=a.tweened_skel_bones,e=function(a){a.parent&&e(d[a.parent]);c.translate(a.x,a.y);c.rotate(a.rotation*Math.PI/180);c.scale(a.scaleX,a.scaleY)},h;for(h in d)a=d[h],b=a.length||0,c.save(),e(a),c.beginPath(),c.arc(0,0,2,0,2*Math.PI,!1),0<b?(c.moveTo(0,-2),c.lineTo(b,0),c.lineTo(0,2)):(c.moveTo(-2,0),c.lineTo(-4,0),c.moveTo(2,0),c.lineTo(4,0),c.moveTo(0,-2),c.lineTo(0,
-4),c.moveTo(0,2),c.lineTo(0,4)),c.strokeStyle="rgba(200,200,200,0.75)",c.stroke(),c.scale(.5,-.5),c.fillText(h,0,0),c.restore()}};
main.view_2d.prototype.draw_pose_2d=function(a){var b=a.data;if(b&&(b=b.skeleton)){a.strike();var c=this.ctx_2d,d=a.tweened_skel_bones,e=a.tweened_skel_slots,h=function(a){a.parent&&h(d[a.parent]);c.translate(a.x,a.y);c.rotate(a.rotation*Math.PI/180);c.scale(a.scaleX,a.scaleY)};if(a=a.curSkin())for(var p in e){var l=e[p],g=l.attachment;if(g){var f=a.skin_slots[p];if(f){var k=d[l.bone],f=f.skin_attachments[g];c.save();h(k);c.translate(f.x,f.y);c.rotate(f.rotation*Math.PI/180);c.scale(f.scaleX,f.scaleY);
c.globalAlpha=l.color.a;l=f.name||g;(l=b.files&&b.files[l])&&l.image&&!l.image.hidden?(c.scale(1,-1),g=l.width,f=l.height,c.drawImage(l.image,-g/2,-f/2,g,f)):(g=f.width,f=f.height,c.fillStyle="rgba(127,127,127,0.5)",c.fillRect(-g/2,-f/2,g,f));c.restore()}}}}};
main.view_gl=function(a){var b={},c=a.getContext("webgl",b);this.ctx_gl=c=(c=(c=c||a.getContext("experimental-webgl",b))||a.getContext("webkit-3d",b))||a.getContext("moz-webgl",b);c||(a.style.backgroundColor="rgba(127,0,0,1.0)");c&&(c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||window.console.log("No WebGL Compressed Texture S3TC"));if(c){c.clearColor(0,0,0,0);c.clearDepth(1);c.depthFunc(c.LEQUAL);c.enable(c.DEPTH_TEST);c.blendFunc(c.ONE,
c.ONE_MINUS_SRC_ALPHA);c.enable(c.BLEND);c.viewport(0,0,c.canvas.width,c.canvas.height);this.uMatrixP=new Float32Array(16);this.uMatrixC=new Float32Array(16);this.uMatrixM=new Float32Array(16);this.uGlobalAlpha=new Float32Array(1);a=new fo.m3x2;a.selfScale(2/c.canvas.width,2/c.canvas.height);this.load_projection_mtx(a);this.load_camera_mtx(fo.m3x2.IDENTITY);this.load_modelview_mtx(fo.m3x2.IDENTITY);a=function(a,b){var d=c.createShader(b);c.shaderSource(d,a);c.compileShader(d);c.getShaderParameter(d,
c.COMPILE_STATUS)||(window.console.log(c.getShaderInfoLog(d)),c.deleteShader(d),d=null);return d};var b="uniform mat4 uMatrixP;uniform mat4 uMatrixC;",b=b+"uniform mat4 uMatrixM;",b=b+"attribute vec3 aVertexPosition;",b=b+"attribute vec4 aVertexColor;",b=b+"attribute vec2 aVertexTexCoord;",b=b+"varying vec4 vColor;",b=b+"varying vec2 vTexCoord;",b=b+"void main(void) {",b=b+" gl_Position = uMatrixP * uMatrixC * uMatrixM * vec4(aVertexPosition, 1.0);",b=b+" vColor = aVertexColor;",b=b+" vTexCoord = aVertexTexCoord;",
b=b+"}",b=a(b,c.VERTEX_SHADER),d;d="precision mediump float;uniform float uGlobalAlpha;";d+="uniform sampler2D uSampler;";d+="varying vec4 vColor;";d+="varying vec2 vTexCoord;";d+="void main(void) {";d+=" gl_FragColor = texture2D(uSampler, vTexCoord.st);";d+=" gl_FragColor *= uGlobalAlpha;";d+="}";a=a(d,c.FRAGMENT_SHADER);a=this.program=function(a,b){var d=c.createProgram();c.attachShader(d,a);c.attachShader(d,b);c.linkProgram(d);c.getProgramParameter(d,c.LINK_STATUS)||(window.console.log("could not link shader program"),
c.deleteProgram(d),d=null);return d}(b,a);a.uMatrixP=c.getUniformLocation(a,"uMatrixP");a.uMatrixC=c.getUniformLocation(a,"uMatrixC");a.uMatrixM=c.getUniformLocation(a,"uMatrixM");a.uGlobalAlpha=c.getUniformLocation(a,"uGlobalAlpha");a.uSampler=c.getUniformLocation(a,"uSampler");a.aVertexPosition=c.getAttribLocation(a,"aVertexPosition");a.aVertexColor=c.getAttribLocation(a,"aVertexColor");a.aVertexTexCoord=c.getAttribLocation(a,"aVertexTexCoord");a=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];b=this.vertex_position_buffer=
c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b);c.bufferData(c.ARRAY_BUFFER,new Float32Array(a),c.STATIC_DRAW);b.itemType=c.FLOAT;b.itemSize=3;b.numItems=a.length/b.itemSize;a=[1,0,0,.5,0,1,0,.5,0,0,1,.5,1,1,1,.5];b=this.vertex_color_buffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b);c.bufferData(c.ARRAY_BUFFER,new Float32Array(a),c.STATIC_DRAW);b.itemType=c.FLOAT;b.itemSize=4;b.numItems=a.length/b.itemSize;a=[0,0,0,1,1,1,1,0];b=this.vertex_texcoord_buffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,
b);c.bufferData(c.ARRAY_BUFFER,new Float32Array(a),c.STATIC_DRAW);b.itemType=c.FLOAT;b.itemSize=2;b.numItems=a.length/b.itemSize;a=[0,1,2,3];b=this.vertex_index_buffer=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),c.STATIC_DRAW);b.itemType=c.UNSIGNED_SHORT;b.itemSize=1;b.numItems=a.length/b.itemSize}};
main.set_a16_from_m3x2=function(a,b){a[0]=b.a_x;a[1]=b.a_y;a[2]=0;a[3]=0;a[4]=b.b_x;a[5]=b.b_y;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b.c_x;a[13]=b.c_y;a[14]=0;a[15]=1};main.view_gl.prototype.load_projection_mtx=function(a){main.set_a16_from_m3x2(this.uMatrixP,a)};main.view_gl.prototype.load_camera_mtx=function(a){main.set_a16_from_m3x2(this.uMatrixC,a)};main.view_gl.prototype.load_modelview_mtx=function(a){main.set_a16_from_m3x2(this.uMatrixM,a)};
main.view_gl.prototype.draw_pose_gl=function(a){var b=a.data;if(b&&(b=b.skeleton)){a.strike();var c=this.ctx_gl,d=a.tweened_skel_bones,e=a.tweened_skel_slots,h=new fo.m3x2,p=function(a){a.parent&&p(d[a.parent]);h.selfTranslate(a.x,a.y);h.selfRotateDegrees(a.rotation);h.selfScale(a.scaleY,a.scaleY)};if(a=a.curSkin())for(var l in e){var g=e[l],f=g.attachment;if(f){var k=a.skin_slots[l];if(k){var m=d[g.bone],k=k.skin_attachments[f];h.makeIdentity();p(m);h.selfTranslate(k.x,k.y);h.selfRotateDegrees(k.rotation);
h.selfScale(k.scaleX,k.scaleY);f=k.name||f;(f=b.files&&b.files[f])&&f.image&&!f.image.hidden?(m=f.width,k=f.height):(m=k.width,k=k.height);h.selfScale(m/2,k/2);this.load_modelview_mtx(h);this.uGlobalAlpha[0]=g.color.a;f&&!f.texture&&f.image&&!f.image.hidden&&(f.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,f.texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,f.image),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindTexture(c.TEXTURE_2D,null));f&&f.texture&&(g=this.program,c.useProgram(g),c.uniformMatrix4fv(g.uMatrixP,!1,this.uMatrixP),c.uniformMatrix4fv(g.uMatrixC,!1,this.uMatrixC),c.uniformMatrix4fv(g.uMatrixM,!1,this.uMatrixM),c.uniform1fv(g.uGlobalAlpha,this.uGlobalAlpha),c.activeTexture(c.TEXTURE0),
c.bindTexture(c.TEXTURE_2D,f.texture),c.uniform1i(g.uSampler,0),c.bindBuffer(c.ARRAY_BUFFER,this.vertex_position_buffer),c.vertexAttribPointer(g.aVertexPosition,this.vertex_position_buffer.itemSize,this.vertex_position_buffer.itemType,!1,0,0),c.enableVertexAttribArray(g.aVertexPosition),c.bindBuffer(c.ARRAY_BUFFER,this.vertex_color_buffer),c.vertexAttribPointer(g.aVertexColor,this.vertex_color_buffer.itemSize,this.vertex_color_buffer.itemType,!1,0,0),c.enableVertexAttribArray(g.aVertexColor),c.bindBuffer(c.ARRAY_BUFFER,
this.vertex_texcoord_buffer),c.vertexAttribPointer(g.aVertexTexCoord,this.vertex_texcoord_buffer.itemSize,this.vertex_texcoord_buffer.itemType,!1,0,0),c.enableVertexAttribArray(g.aVertexTexCoord),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.vertex_index_buffer),c.drawElements(c.TRIANGLE_FAN,this.vertex_index_buffer.numItems,this.vertex_index_buffer.itemType,0))}}}}};
main.test_draw_bezier_curves=function(a,b){b.save();b.translate(0,b.canvas.height);b.scale(1,-1);b.translate(b.canvas.width/4,b.canvas.height/4);b.scale(.5,.5);b.lineWidth=4;b.strokeStyle="black";b.strokeRect(0,0,b.canvas.width,b.canvas.height);var c=Math.cos(a.time/1E3),d=Math.sin(a.time/1E3),c=Math.min(Math.max(c,0),1),e=1-Math.cos(2*a.time/1E3),h=1-Math.sin(2*a.time/1E3),e=Math.min(Math.max(e,0),1),p=spine.step_bezier_curve(c,d,e,h),l=spine.bezier_curve(c,d,e,h,1E-6);b.beginPath();b.moveTo(0,0);
for(var g=0;1.01>g;g+=.01){var f=g*b.canvas.width,k=p(g)*b.canvas.height;b.lineTo(f,k)}b.strokeStyle="red";b.stroke();b.beginPath();b.moveTo(0,0);for(g=0;1.01>g;g+=.01)f=g*b.canvas.width,k=l(g)*b.canvas.height,b.lineTo(f,k);b.strokeStyle="green";b.stroke();b.beginPath();b.moveTo(0,0);b.lineTo(c*b.canvas.width,d*b.canvas.height);b.arc(c*b.canvas.width,d*b.canvas.height,10,0,2*Math.PI);b.strokeStyle="blue";b.stroke();b.beginPath();b.moveTo(b.canvas.width,b.canvas.height);b.lineTo(e*b.canvas.width,h*
b.canvas.height);b.arc(e*b.canvas.width,h*b.canvas.height,10,0,2*Math.PI);b.strokeStyle="blue";b.stroke();f=.5+.5*Math.cos(3*a.time/1E3);d=p(f);h=l(f);b.beginPath();b.moveTo(f*b.canvas.width,0);b.lineTo(f*b.canvas.width,d*b.canvas.height);b.arc(f*b.canvas.width,d*b.canvas.height,10,0,2*Math.PI);b.strokeStyle="blue";b.stroke();b.beginPath();b.moveTo(f*b.canvas.width,0);b.lineTo(f*b.canvas.width,h*b.canvas.height);b.strokeStyle="blue";b.stroke();b.restore()};
